# JavaScript V8引擎 

v8引擎是js引擎的一种实现

js引擎是执行js代码的程序或解释器。js引擎可以实现为标准解释器或及时编译器。，它以某种形式将ks编译为字节码

V8是被设计用来提高网页浏览器内部JS执行的性能，那么如何提高性能？

为了提高性能，v8会把js代码转换为高效的机器码，而不是依赖于解释器去执行。
V8引入了JIT在运行时把js代码进行转换为机器码。
这里主要的区别在于V8不生成字节码或任何中间代码。

V8曾经有两个编译器

full-codegen — 一个简单且速度非常快的编译器，可以生成简单且相对较慢的机器码
Crankshaft —  一个更复杂的（Just-In-Time）优化编译器，生成高度优化的代码

v8充分多进程、主进程负责获取代码，编译生成机器码，
有专门负责优化的进程，
还有一个监控进程负责分析哪些代码执行比较慢，以便Crankshaft做优化，
最后还有一个就是GC进程，负责内存垃圾回收

v8的具体优化方案

  1 尽可能最大的内联。
  2 隐藏类


    js中并没有指针的概念，js的对象访问就是基于隐藏类的。下面理解下隐藏类

    ```
    function Point(x, y) {
     this.x = x;
     this.y = y;
    }
    var p1 = new Point(1, 2);
    ```
   3 内联缓存
   4 Compilation to machine code
   5 垃圾回收机制
     对于垃圾收集，V8采用了传统的分布式扫描方式来清理老一代。标记阶段应该停止js的执行。
     为了控制GC成本并使执行更加稳定，V8使用了渐进式标记，而不是走遍整个堆，试图标记每一个可能的对象
     它只走一部分，然后恢复正常执行。

     


     



    