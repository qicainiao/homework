<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script type="text/javascript">
      //es5 谁掉指向
  </script>
  </head>
    <body>
    <div id="myDiv" style="background-color: lightblue;width: 0;height: 20px;line-height: 20px;">0%</div>
    <button id="btn">run</button>
    注意：若你想在浏览器下次重绘之前继续更新下一帧动画，那么回调函数自身必须再次调用window.requestAnimationFrame()
    <script>
    var timer;
    btn.onclick = function(){
      myDiv.style.width = '0';
      cancelAnimationFrame(timer);
      timer = requestAnimationFrame(function fn(){
          if(parseInt(myDiv.style.width) < 500){
              myDiv.style.width = parseInt(myDiv.style.width) + 5 + 'px';
              myDiv.innerHTML =     parseInt(myDiv.style.width)/5 + '%';
              timer = requestAnimationFrame(fn);
          }else{
              cancelAnimationFrame(timer);
          }
      });
    }
   </script>
  </body>
</html>
