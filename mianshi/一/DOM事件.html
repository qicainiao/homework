<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
        https://www.cnblogs.com/xiaohuochai/p/5859476.html
    基本概念：DOM事件的级别

      DOM0 element.onclick= function(){}
      DOM1 element.addEventListener('click',function(){},false)
      DOM2 element.addEventListener('keyup',function(){},false)
    DOM事件的模型：冒泡（从当前元素往上） 捕获(从上往下)
       
    DOM事件流： 
      事件流(又叫事件传播)描述的是从页面中接收事件的顺序
      事件流又称为事件传播，DOM2级事件规定的事件流包括三个阶段：事件捕获阶段(capture phase)、处于目标阶段(target phase)和事件冒泡阶段(bubbling phase)
      首先发生的是事件捕获，为截获事件提供了机会。然后是实际的目标接收到事件，最后一个阶段是冒泡阶段，可以在这个阶段对事件做出响应
    描述DOM事件捕获的具体流程：
      window document html body div -- 目标元素
    描述DOM事件冒泡的具体流程： 上面反过来
    Event对象的常见应用：
       event.preventDefault();  //阻止默认事件  比如A标签绑定click，如果点击就不会执行跳转了
       event.stopPropagation(); //阻止冒泡的行为
       event.stopImmediatePropagation(); //按钮绑定两个click事件，我想A事件被点击之后不要再点击B
       event.currentTarget  //指事件绑定的当前组件
       event.target   //ul li 获取当前被点击的li event.target  表示当前被点击的元素  触发事件的源组件
    自定义事件：

    <div id="box" style="height:100px;width:300px;background-color:pink;">
        <button id="reset">还原</button>
    </div>

<script>
    //IE8-浏览器返回div body html document
    //其他浏览器返回div body html document window
    // reset.onclick = function(){
    //    box.innerHTML += 'button\n';
    //    console.log("===========")
    //  }
    // box.onclick = function(){box.innerHTML += 'div\n';}
    // document.body.onclick = function(){box.innerHTML += 'body\n';}
    // document.documentElement.onclick = function(){box.innerHTML += 'html\n';}
    // document.onclick = function(){box.innerHTML += 'document\n';}
    // window.onclick = function(){box.innerHTML += 'window\n';}


        //IE8-浏览器不支持
    //其他浏览器返回window document html body div
    // reset.onclick = function(){history.go();}
    // box.addEventListener('click',function(){box.innerHTML += 'div\n'},true)
    // document.body.addEventListener('click',function(){box.innerHTML += 'body\n';},true);
    // document.documentElement.addEventListener('click',function(){box.innerHTML += 'html\n';},true);
    // document.addEventListener('click',function(){box.innerHTML += 'document\n';},true);
    // window.addEventListener('click',function(){box.innerHTML += 'window\n';},true);

    // element.addEventListener(event, function, useCapture)
    // 可选。布尔值，指定事件是否在捕获或冒泡阶段执行。
    // 可能值:
    // true - 事件句柄在捕获阶段执行
    // false- false- 默认。事件句柄在冒泡阶段执行

    box.addEventListener('click',function(){box.innerHTML += 'div\n'},false)
    document.body.addEventListener('click',function(){box.innerHTML += 'body\n';},false);
    document.documentElement.addEventListener('click',function(){box.innerHTML += 'html\n';},false);
    document.addEventListener('click',function(){box.innerHTML += 'document\n';},false);
    window.addEventListener('click',function(){box.innerHTML += 'window\n';},false);


        
       

    //自定义事件
    var eve = new Event("test");
    box.addEventListener("test",function(){
        console.log("test dispatch");
        
    })

    setTimeout(function(){
        box.dispatchEvent(eve)
    },1000)


    //CustomEvent 可以创建一个更高度自定义事件，还可以附带一些数据，具体用法如下：
        // var myEvent = new CustomEvent(eventname, options);
        // 其中 options 可以是：
        // {
        //   detail: {
        //     ...
        //   },
        //   bubbles: true,    //是否冒泡
        //   cancelable: false //是否取消默认事件
        // }
        // element.dispatchEvent(customEvent);

        // add an appropriate event listener

        // obj.addEventListener("cat", function(e) { process(e.detail) });
        
        //  // create and dispatch the event
        //  var event = new CustomEvent("cat", {"detail":{"hazcheeseburger":true}});
        //  obj.dispatchEvent(event);
        //  使用自定义事件需要注意兼容性问题，而使用 jQuery 就简单多了：
        
        //  // 绑定自定义事件
        //  $(element).on('myCustomEvent', function(){});
        
        //  // 触发事件
        //  $(element).trigger('myCustomEvent');
        //  // 此外，你还可以在触发自定义事件时传递更多参数信息：
        
        //  $( "p" ).on( "myCustomEvent", function( event, myName ) {
        //    $( this ).text( myName + ", hi there!" );
        //  });
        //  $( "button" ).click(function () {
        //    $( "p" ).trigger( "myCustomEvent", [ "John" ] );
        //  });
        
        var customEvent = new CustomEvent("get",{"detail":{'name':'lili',age:3}})
        box.addEventListener("get",function(e){
          console.log("get dispatch",e);
        })
        box.dispatchEvent(customEvent)

</script>

       
  <section >


  </section>
</body>
</html>